<!DOCTYPE html><html lang="zh-CN"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>CentOS7 升级 cmake | 钐椋的博客</title><script src="https://cdn.bootcss.com/valine/1.4.4/Valine.min.js"></script><link rel="stylesheet" href="/css/arknights.css"><link rel="stylesheet" href="https://cdn.bootcdn.net/ajax/libs/highlight.js/10.1.2/styles/atom-one-dark-reasonable.min.css"><style>@font-face {
 font-family: BenderLight;
 src: local('Bender'), url("/font/BenderLight.ttf");
}
@font-face {
 font-family: 'JetBrains Mono';
 src: local('JetBrains Mono'), url('/font/JetBrainsMono-Regular.woff2') format('woff2');
}</style><meta name="generator" content="Hexo 5.2.0"></head><body><header><nav><a href="/">首页</a><a href="/archives/">归档</a></nav></header><main><article><div id="post-bg"><div id="post-title"><div id="post-info"><span>date:<time datetime="2022-06-02T04:12:04.748Z" id="date"> 2022-06-02</time></span><br><span>updated:<time datetime="2022-06-02T04:12:04.748Z" id="updated"> 2022-06-02</time></span></div><h1>CentOS7 升级 cmake</h1><hr></div><div id="post-content"><p>参考 <a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_45661908/article/details/124076857">centos7升级 cmake</a></p>
<p>使用安装命令无法升级 cmake</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash">yum remove -y cmake<br>sudo yum -y install cmake<br></code></pre></td></tr></table></figure>

<p>仍是 2.8.12.2</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash">[root@localhost build]<span class="hljs-comment"># cmake -version</span><br>cmake version 2.8.12.2<br></code></pre></td></tr></table></figure>

<p>只能编译安装</p>
<h2 id="删除旧版本-cmake"><a href="#删除旧版本-cmake" class="headerlink" title="删除旧版本 cmake"></a>删除旧版本 cmake</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">yum remove -y cmake<br></code></pre></td></tr></table></figure>

<h2 id="安装需要的模块"><a href="#安装需要的模块" class="headerlink" title="安装需要的模块"></a>安装需要的模块</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">yum install -y libxml2 libxml2-devel bzip2 bzip2-devel libcurl libcurl-devel libjpeg libjpeg-devel zstd libzstd-devel curl libcurl-devel libpng libpng-devel<br></code></pre></td></tr></table></figure>

<h2 id="下载-cmake-源代码"><a href="#下载-cmake-源代码" class="headerlink" title="下载 cmake 源代码"></a>下载 cmake 源代码</h2><p>官网地址为 <a target="_blank" rel="noopener" href="https://cmake.org/">https://cmake.org</a>，选择 download 中的源代码文件</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash">wget https://github.com/Kitware/CMake/releases/download/v3.23.0/cmake-3.23.0.tar.gz<br>tar -zxvf cmake-3.23.0.tar.gz<br></code></pre></td></tr></table></figure>

<h2 id="编译-cmake"><a href="#编译-cmake" class="headerlink" title="编译 cmake"></a>编译 cmake</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">cd</span> cmake-3.23.0<br>mkdir build<br><span class="hljs-built_in">cd</span> build<br>../configure --prefix=/usr/<span class="hljs-built_in">local</span>/cmake-3.23.0<br>gmake -j2 <span class="hljs-comment"># 2核服务器配置的参数</span><br><span class="hljs-comment"># make install</span><br>gmake install<br></code></pre></td></tr></table></figure>

<h2 id="配置环境"><a href="#配置环境" class="headerlink" title="配置环境"></a>配置环境</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment">#设置环境变量</span><br>touch /etc/profile.d/cmake.sh<br>chmod 777 /etc/profile.d/cmake.sh <br><span class="hljs-built_in">echo</span> -e <span class="hljs-string">&#x27;\nexport PATH=/usr/local/cmake-3.23.0/bin:$PATH\n&#x27;</span> &gt;&gt; /etc/profile.d/cmake.sh<br><span class="hljs-built_in">source</span> /etc/profile.d/cmake.sh<br> <br><span class="hljs-comment">#设置头文件</span><br><span class="hljs-comment"># ln -sv /usr/local/gcc-11.2.0/include/c++/11.2.0 /usr/include/c++/11.2.0</span><br> <br><span class="hljs-comment">#设置库文件</span><br><span class="hljs-comment"># touch /etc/ld.so.conf.d/gcc.conf</span><br><span class="hljs-comment"># chmod 777 /etc/ld.so.conf.d/gcc.conf </span><br><span class="hljs-comment"># echo -e &quot;/usr/local/gcc-11.2.0/lib64&quot; &gt;&gt; /etc/ld.so.conf.d/gcc.conf</span><br> <br><span class="hljs-comment">#加载动态连接库</span><br><span class="hljs-comment"># ldconfig -v</span><br><span class="hljs-comment"># ldconfig -p |grep gcc</span><br></code></pre></td></tr></table></figure>

<p>重启服务器</p>
<h2 id="查看cmake版本"><a href="#查看cmake版本" class="headerlink" title="查看cmake版本"></a>查看cmake版本</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs bash">[root@localhost build]<span class="hljs-comment"># cmake -version</span><br>cmake version 3.23.0<br><br>CMake suite maintained and supported by Kitware (kitware.com/cmake).<br></code></pre></td></tr></table></figure>

<p>cmake 升级成功</p><div id="paginator"></div></div><div id="post-footer"><hr><a href="/2022/06/23/CentOS7-%E9%83%A8%E7%BD%B2-ZlMediaKit/">← Prev CentOS7 部署 ZlMediaKit</a><span style="color: #fe2"> | </span><a href="/2022/04/14/Vue-%E9%A1%B9%E7%9B%AE%E4%BD%BF%E7%94%A8-svg-%E5%9B%BE%E6%A0%87/">Vue 项目使用 svg 图标 Next →</a><hr></div><div id="bottom-btn"><a id="to-index" href="#post-index" title="index">≡</a><a id="to-top" href="#post-title" title="to top">∧</a></div><details id="reward"><summary>打赏</summary><div id="alipay"><span>支付宝 | Alipay</span><br><img src="/img/Alipay.png"></div><div id="wechat"><span>微信 | WeChat</span><br><img src="/img/WeChat.png"></div></details><div id="Valine"></div><script>new Valine({
 el: '#Valine'
 , appId: ''
 , appKey: ''
 , placeholder: '此条评论委托企鹅物流发送'
})</script></div></article><aside><div id="about"><a href="/" id="logo"><img src="https://ak.hypergryph.com/assets/index/images/ak/pc/faction/1.png" alt="Logo"></a><h1 id="Dr"><a target="_blank" rel="noopener" href="https://github.com/shanliangLS"> Dr.Shining</a></h1><section id="total"><a id="total-archives" href="/archives"><span class="total-title">Archives Total:</span><span class="total-number">28</span></a><div id="total-tags"><span class="total-title">Tags:</span><span class="total-number">20</span></div><div id="total-categories"><span class="total-title">Categories:</span><span class="total-number">7</span></div></section></div><div id="aside-block"><h1>INDEX</h1><div id="post-index"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%88%A0%E9%99%A4%E6%97%A7%E7%89%88%E6%9C%AC-cmake"><span class="toc-number">1.</span> <span class="toc-text">删除旧版本 cmake</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%89%E8%A3%85%E9%9C%80%E8%A6%81%E7%9A%84%E6%A8%A1%E5%9D%97"><span class="toc-number">2.</span> <span class="toc-text">安装需要的模块</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%8B%E8%BD%BD-cmake-%E6%BA%90%E4%BB%A3%E7%A0%81"><span class="toc-number">3.</span> <span class="toc-text">下载 cmake 源代码</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%BC%96%E8%AF%91-cmake"><span class="toc-number">4.</span> <span class="toc-text">编译 cmake</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%85%8D%E7%BD%AE%E7%8E%AF%E5%A2%83"><span class="toc-number">5.</span> <span class="toc-text">配置环境</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%9F%A5%E7%9C%8Bcmake%E7%89%88%E6%9C%AC"><span class="toc-number">6.</span> <span class="toc-text">查看cmake版本</span></a></li></ol></div></div><footer><nobr><span class="text-title">©</span><span class="text-content">github.com/shanliangLS</span></nobr><wbr><wbr><nobr>published with&nbsp;<a target="_blank" rel="noopener" href="http://hexo.io">Hexo&nbsp;</a></nobr><wbr><nobr>Theme&nbsp;<a target="_blank" rel="noopener" href="https://github.com/Yue-plus/hexo-theme-arknights">Arknight&nbsp;</a></nobr></footer></aside></main><canvas id="canvas-dust"></canvas><script src="/js/arknights.js"></script><script src="https://cdn.bootcdn.net/ajax/libs/highlight.js/10.1.2/highlight.min.js"></script></body></html>