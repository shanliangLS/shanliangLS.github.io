<!DOCTYPE html><html lang="zh-CN"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>前端自动化测试工具 Cypress | 钐椋的博客</title><script src="https://cdn.bootcss.com/valine/1.4.4/Valine.min.js"></script><link rel="stylesheet" href="/css/arknights.css"><link rel="stylesheet" href="https://cdn.bootcdn.net/ajax/libs/highlight.js/10.1.2/styles/atom-one-dark-reasonable.min.css"><style>@font-face {
 font-family: BenderLight;
 src: local('Bender'), url("/font/BenderLight.ttf");
}
@font-face {
 font-family: 'JetBrains Mono';
 src: local('JetBrains Mono'), url('/font/JetBrainsMono-Regular.woff2') format('woff2');
}</style><meta name="generator" content="Hexo 5.2.0"></head><body><header><nav><a href="/">首页</a><a href="/archives/">归档</a></nav></header><main><article><div id="post-bg"><div id="post-title"><div id="post-info"><span>date:<time datetime="2020-12-03T02:54:45.000Z" id="date"> 2020-12-03</time></span><br><span>updated:<time datetime="2020-12-03T03:04:54.758Z" id="updated"> 2020-12-03</time></span></div><h1>前端自动化测试工具 Cypress</h1><hr></div><div id="post-content"><p>Cypress</p>
<p>一个端到端 (e2e) 的 web 自动化测试工具</p>
<h2 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">cd</span> Crypress_project<br>npm init -y<br>npm install cypress --save-dev<br></code></pre></td></tr></table></figure>

<p>修改 <code>package.json</code> 文件</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs json">&#123;<br>  <span class="hljs-attr">&quot;scripts&quot;</span>: &#123;<br>    <span class="hljs-attr">&quot;cypress&quot;</span>: <span class="hljs-string">&quot;cypress open&quot;</span><br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<p>启动</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">npm run cypress<br></code></pre></td></tr></table></figure>

<p>第一次启动 Cypress，它已经为我们准备了丰富的例子</p>
<img src="/2020/12/03/%E5%89%8D%E7%AB%AF%E8%87%AA%E5%8A%A8%E5%8C%96%E6%B5%8B%E8%AF%95%E5%B7%A5%E5%85%B7-Cypress/cypress1.png" class="">

<h3 id="项目结构"><a href="#项目结构" class="headerlink" title="项目结构"></a>项目结构</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><code class="hljs plain">cypress<br>├── fixtures<br>│   └── example.json<br>├── integration # 存放测试文件<br>│   └── examples<br>│       ├── actions.spec.js<br>│       ├── aliasing.spec.js<br>│       ├── assertions.spec.js<br>│       ├── connectors.spec.js<br>│       ├── cookies.spec.js<br>│       ├── cypress_api.spec.js<br>│       ├── files.spec.js<br>│       ├── local_storage.spec.js<br>│       ├── location.spec.js<br>│       ├── misc.spec.js<br>│       ├── navigation.spec.js<br>│       ├── network_requests.spec.js<br>│       ├── querying.spec.js<br>│       ├── spies_stubs_clocks.spec.js<br>│       ├── traversal.spec.js<br>│       ├── utilities.spec.js<br>│       ├── viewport.spec.js<br>│       ├── waiting.spec.js<br>│       └── window.spec.js<br>├── plugins # 定义一些初始化设置跟变量<br>│   └── index.js<br>└── support # 可以抽取一些公共的方法作为我们的私有命令<br>    ├── commands.js<br>    └── index.js<br></code></pre></td></tr></table></figure>

<h3 id="简单测试"><a href="#简单测试" class="headerlink" title="简单测试"></a>简单测试</h3><p>在 <code>/intgration</code> 目录下新建 <code>sample.spec.js</code></p>
<img src="/2020/12/03/%E5%89%8D%E7%AB%AF%E8%87%AA%E5%8A%A8%E5%8C%96%E6%B5%8B%E8%AF%95%E5%B7%A5%E5%85%B7-Cypress/cypress2.png" class="">

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs js">describe(<span class="hljs-string">&#x27;simple test case for cypress&#x27;</span>,<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>&#123;<br>    it(<span class="hljs-string">&#x27;Does not match!&#x27;</span>,<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>&#123;<br>        expect(<span class="hljs-literal">true</span>).to.equal(<span class="hljs-literal">true</span>)<br>    &#125;)<br>&#125;)<br></code></pre></td></tr></table></figure>

<p>Cypress 界面中出现该测试用例，点击即可运行</p>
<img src="/2020/12/03/%E5%89%8D%E7%AB%AF%E8%87%AA%E5%8A%A8%E5%8C%96%E6%B5%8B%E8%AF%95%E5%B7%A5%E5%85%B7-Cypress/cypress3.png" class="">

<p>尽管我们没有做一些实际的事情，但是这个测试是通过的</p>
<img src="/2020/12/03/%E5%89%8D%E7%AB%AF%E8%87%AA%E5%8A%A8%E5%8C%96%E6%B5%8B%E8%AF%95%E5%B7%A5%E5%85%B7-Cypress/cypress4.png" class="">

<h2 id="实际测试用例"><a href="#实际测试用例" class="headerlink" title="实际测试用例"></a>实际测试用例</h2><p>Cypress 官方测试网站 <a target="_blank" rel="noopener" href="https://example.cypress.io/commands/actions">https://example.cypress.io/commands/actions</a></p>
<h3 id="访问百度首页并搜索-cypress-test"><a href="#访问百度首页并搜索-cypress-test" class="headerlink" title="访问百度首页并搜索 cypress test"></a>访问百度首页并搜索 <code>cypress test</code></h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs plain">describe(&#39;My First Test&#39;, function () &#123;<br>    it(&#39;Does not do much!&#39;, function () &#123;<br>        cy.visit(&quot;https:&#x2F;&#x2F;www.baidu.com&quot;)<br><br>        cy.get(&quot;#kw&quot;, &#123;timeout: 2000&#125;).type(&quot;cypress test&quot;)<br>       <br>        cy.wait(100)<br>       <br>        cy.get(&quot;#su&quot;, &#123; timeout: 2000 &#125;).click()<br>    &#125;)<br>&#125;)<br></code></pre></td></tr></table></figure>

<p>Cypress 运行结果</p>
<img src="/2020/12/03/%E5%89%8D%E7%AB%AF%E8%87%AA%E5%8A%A8%E5%8C%96%E6%B5%8B%E8%AF%95%E5%B7%A5%E5%85%B7-Cypress/cypress5.png" class="">

<h2 id="Cypress-语法"><a href="#Cypress-语法" class="headerlink" title="Cypress 语法"></a>Cypress 语法</h2><p>记一些 Cypress 的语法，有时间再加</p>
<h3 id="查找元素"><a href="#查找元素" class="headerlink" title="查找元素"></a>查找元素</h3><p>如果你以前使用过 jQuery ，则可能习惯于查询以下元素</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs js">$(<span class="hljs-string">&#x27;.my-selector&#x27;</span>)<br></code></pre></td></tr></table></figure>

<p>在 Cypress 中，查询元素相同</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs js">cy.get(<span class="hljs-string">&#x27;.my-selector&#x27;</span>)<br></code></pre></td></tr></table></figure>

<p>实际上， Cypress 捆绑了 jQuery ，并公开了许多 DOM 遍历方法，因此你可以使用已经熟悉的API轻松处理复杂的HTML结构</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs plain">&#x2F;&#x2F; Each method is equivalent to its jQuery counterpart. Use what you know!<br>cy.get(&#39;#main-content&#39;)<br>  .find(&#39;.article&#39;)<br>  .children(&#39;img[src^&#x3D;&quot;&#x2F;static&quot;]&#39;)<br>  .first()<br></code></pre></td></tr></table></figure>

<h4 id="元素定位方式"><a href="#元素定位方式" class="headerlink" title="元素定位方式"></a>元素定位方式</h4><ul>
<li>get：按 css 或元素特定属性的方式定位元素</li>
<li>contains：按特定字符串定位元素</li>
</ul>
<div id="paginator"></div></div><div id="post-footer"><hr><a href="/2020/12/03/Vue-%E7%BB%84%E4%BB%B6%E5%A4%8D%E7%94%A8/">← Prev Vue 组件复用</a><span style="color: #fe2"> | </span><a href="/2020/12/03/%E5%9F%BA%E4%BA%8E-Vue-Element-Admin-%E7%9A%84%E5%8A%A8%E6%80%81%E8%B7%AF%E7%94%B1/">基于 Vue Element Admin 的动态路由 Next →</a><hr></div><div id="bottom-btn"><a id="to-index" href="#post-index" title="index">≡</a><a id="to-top" href="#post-title" title="to top">∧</a></div><details id="reward"><summary>打赏</summary><div id="alipay"><span>支付宝 | Alipay</span><br><img src="/img/Alipay.png"></div><div id="wechat"><span>微信 | WeChat</span><br><img src="/img/WeChat.png"></div></details><div id="Valine"></div><script>new Valine({
 el: '#Valine'
 , appId: ''
 , appKey: ''
 , placeholder: '此条评论委托企鹅物流发送'
})</script></div></article><aside><div id="about"><a href="/" id="logo"><img src="https://ak.hypergryph.com/assets/index/images/ak/pc/faction/1.png" alt="Logo"></a><h1 id="Dr"><a target="_blank" rel="noopener" href="https://github.com/shanliangLS"> Dr.Shining</a></h1><section id="total"><a id="total-archives" href="/archives"><span class="total-title">Archives Total:</span><span class="total-number">18</span></a><div id="total-tags"><span class="total-title">Tags:</span><span class="total-number">17</span></div><div id="total-categories"><span class="total-title">Categories:</span><span class="total-number">6</span></div></section></div><div id="aside-block"><h1>INDEX</h1><div id="post-index"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%89%E8%A3%85"><span class="toc-number">1.</span> <span class="toc-text">安装</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%A1%B9%E7%9B%AE%E7%BB%93%E6%9E%84"><span class="toc-number">1.1.</span> <span class="toc-text">项目结构</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%AE%80%E5%8D%95%E6%B5%8B%E8%AF%95"><span class="toc-number">1.2.</span> <span class="toc-text">简单测试</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%9E%E9%99%85%E6%B5%8B%E8%AF%95%E7%94%A8%E4%BE%8B"><span class="toc-number">2.</span> <span class="toc-text">实际测试用例</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AE%BF%E9%97%AE%E7%99%BE%E5%BA%A6%E9%A6%96%E9%A1%B5%E5%B9%B6%E6%90%9C%E7%B4%A2-cypress-test"><span class="toc-number">2.1.</span> <span class="toc-text">访问百度首页并搜索 cypress test</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Cypress-%E8%AF%AD%E6%B3%95"><span class="toc-number">3.</span> <span class="toc-text">Cypress 语法</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9F%A5%E6%89%BE%E5%85%83%E7%B4%A0"><span class="toc-number">3.1.</span> <span class="toc-text">查找元素</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%85%83%E7%B4%A0%E5%AE%9A%E4%BD%8D%E6%96%B9%E5%BC%8F"><span class="toc-number">3.1.1.</span> <span class="toc-text">元素定位方式</span></a></li></ol></li></ol></li></ol></div></div><footer><nobr><span class="text-title">©</span><span class="text-content">github.com/shanliangLS</span></nobr><wbr><wbr><nobr>published with&nbsp;<a target="_blank" rel="noopener" href="http://hexo.io">Hexo&nbsp;</a></nobr><wbr><nobr>Theme&nbsp;<a target="_blank" rel="noopener" href="https://github.com/Yue-plus/hexo-theme-arknights">Arknight&nbsp;</a></nobr></footer></aside></main><canvas id="canvas-dust"></canvas><script src="/js/arknights.js"></script><script src="https://cdn.bootcdn.net/ajax/libs/highlight.js/10.1.2/highlight.min.js"></script></body></html>