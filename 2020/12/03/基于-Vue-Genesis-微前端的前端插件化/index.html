<!DOCTYPE html><html lang="zh-CN"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>基于 Vue Genesis 微前端的前端插件化 | 钐椋的博客</title><script src="https://cdn.bootcss.com/valine/1.4.4/Valine.min.js"></script><link rel="stylesheet" href="/css/arknights.css"><link rel="stylesheet" href="https://cdn.bootcdn.net/ajax/libs/highlight.js/10.1.2/styles/atom-one-dark-reasonable.min.css"><style>@font-face {
 font-family: BenderLight;
 src: local('Bender'), url("/font/BenderLight.ttf");
}
@font-face {
 font-family: 'JetBrains Mono';
 src: local('JetBrains Mono'), url('/font/JetBrainsMono-Regular.woff2') format('woff2');
}</style><meta name="generator" content="Hexo 5.2.0"></head><body><header><nav><a href="/">首页</a><a href="/archives/">归档</a></nav></header><main><article><div id="post-bg"><div id="post-title"><div id="post-info"><span>date:<time datetime="2020-12-03T02:09:35.000Z" id="date"> 2020-12-03</time></span><br><span>updated:<time datetime="2020-12-03T02:38:56.814Z" id="updated"> 2020-12-03</time></span></div><h1>基于 Vue Genesis 微前端的前端插件化</h1><hr></div><div id="post-content"><h2 id="Vue-Genesis"><a href="#Vue-Genesis" class="headerlink" title="Vue Genesis"></a><a target="_blank" rel="noopener" href="https://fmfe.github.io/genesis-docs/">Vue Genesis</a></h2><p><code>Genesis</code> 是一个轻量级的 Vue SSR 库</p>
<h2 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h2><p>为了减少生产依赖的大小，<code>Genesis</code> 特意拆分成两个包，<code>@fmfe/genesis-core</code> 负责核心的 SSR 渲染逻辑，<code>@fmfe/genesis-compiler</code> 负责在开发阶段和编译阶段使用，在生产环境中不需要它</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash">npm install @fmfe/genesis-core<br>npm install @fmfe/genesis-compiler -D<br></code></pre></td></tr></table></figure>

<h3 id="TS-运行时"><a href="#TS-运行时" class="headerlink" title="TS 运行时"></a>TS 运行时</h3><p>文档内所有的例子都基于 <code>ts</code> 进行编写，关于如何在 <code>Node</code> 运行 <code>ts</code> ，请了解 <a target="_blank" rel="noopener" href="https://github.com/TypeStrong/ts-node">ts-node</a>。如果你不想使用 <code>ts</code>，可以跳过这个步骤，只需要将文档的例子，修改成 <code>js</code> 语法即可</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">npm install ts-node typescript -g<br></code></pre></td></tr></table></figure>

<h3 id="HTTP-服务"><a href="#HTTP-服务" class="headerlink" title="HTTP 服务"></a>HTTP 服务</h3><p>因为 <code>Genesis</code> 只是一个 SSR 库，它不具备创建 HTTP 服务的能力，所以这里我们还需要安装 <code>Express</code> 。如果你选择了其它的框架，可以跳过这一步，并且将例子中的代码，转换成对应框架的代码即可</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">npm install express<br></code></pre></td></tr></table></figure>

<ul>
<li><em>可直接使用 <a target="_blank" rel="noopener" href="https://github.com/fmfe/vue-genesis-template">vue-genesis-template</a> 一个简单的，快速开发的例子</em></li>
</ul>
<h2 id="vue-genesis-template"><a href="#vue-genesis-template" class="headerlink" title="vue-genesis-template"></a>vue-genesis-template</h2><h3 id="编写插件"><a href="#编写插件" class="headerlink" title="编写插件"></a>编写插件</h3><p>在 <code>src</code> 中编写插件代码</p>
<img src="/2020/12/03/%E5%9F%BA%E4%BA%8E-Vue-Genesis-%E5%BE%AE%E5%89%8D%E7%AB%AF%E7%9A%84%E5%89%8D%E7%AB%AF%E6%8F%92%E4%BB%B6%E5%8C%96/vue-genesis-template1.png" class="">

<p>插件仪表盘界面</p>
<img src="/2020/12/03/%E5%9F%BA%E4%BA%8E-Vue-Genesis-%E5%BE%AE%E5%89%8D%E7%AB%AF%E7%9A%84%E5%89%8D%E7%AB%AF%E6%8F%92%E4%BB%B6%E5%8C%96/vue-genesis-template10.png" class="">

<p>与后台接口交互</p>
<img src="/2020/12/03/%E5%9F%BA%E4%BA%8E-Vue-Genesis-%E5%BE%AE%E5%89%8D%E7%AB%AF%E7%9A%84%E5%89%8D%E7%AB%AF%E6%8F%92%E4%BB%B6%E5%8C%96/vue-genesis-template11.png" class="">

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;template&gt;<br>  &lt;div class&#x3D;&quot;drawer-container&quot;&gt;<br>      &lt;h3 class&#x3D;&quot;drawer-title&quot;&gt;插件界面&lt;&#x2F;h3&gt;<br><br>      &lt;div class&#x3D;&quot;drawer-item&quot;&gt;<br>          &lt;span&gt;总内存&lt;&#x2F;span&gt;<br>          &lt;span class&#x3D;&quot;drawer-switch&quot;&gt;&#123;&#123;totalMemory&#125;&#125; MB&lt;&#x2F;span&gt;<br>      &lt;&#x2F;div&gt;<br><br>      &lt;div class&#x3D;&quot;chart-wrapper&quot;&gt;<br>          &lt;pie-chart :freeMemory&#x3D;&quot;freeMemory&quot; :usedMemory&#x3D;&quot;usedMemory&quot; &#x2F;&gt;<br>      &lt;&#x2F;div&gt;<br>      &lt;div class&#x3D;&quot;chart-wrapper&quot;&gt;<br>          &lt;bar-chart &#x2F;&gt;<br>      &lt;&#x2F;div&gt;<br>  &lt;&#x2F;div&gt;<br>&lt;&#x2F;template&gt;<br><br>&lt;script&gt;<br>import axios from &#39;axios&#39;<br>import Cookies from &#39;js-cookie&#39;<br>import PieChart from &#39;.&#x2F;components&#x2F;PieChart&#39;<br>import BarChart from &#39;.&#x2F;components&#x2F;BarChart&#39;<br><br>export default &#123;<br>    name: &#39;PluginDashboard&#39;,<br>    components: &#123;<br>        PieChart,<br>        BarChart,<br>    &#125;,<br>    data() &#123;<br>        return &#123;<br>            freeMemory: &#39;0&#39;,<br>            usedMemory: &#39;0&#39;,<br>            totalMemory: &#39;0&#39;,<br>        &#125;<br>    &#125;,<br>    mounted() &#123;<br>        this.getMemoryData();<br>        const _this &#x3D; this;<br>        setInterval(function()&#123; _this.getMemoryData(); &#125;, 5000)<br>    &#125;,<br>    methods: &#123;<br>        getMemoryData() &#123;<br>            const _this &#x3D; this;<br>            axios(&#123;<br>                headers:&#123;<br>                    &#39;Authorization&#39;: &#39;Bearer &#39; + Cookies.get(&#39;Admin-Token&#39;)<br>                &#125;,<br>                method: &#39;get&#39;,<br>                url: &#39;http:&#x2F;&#x2F;192.168.131.140:8080&#x2F;api&#x2F;plugins&#x2F;plugin1&#x2F;getMemory&#39;,<br>            &#125;).then(res &#x3D;&gt; &#123;<br>                console.log(res);<br>                _this.freeMemory &#x3D; parseInt(res.data.freeMemory);<br>                _this.usedMemory &#x3D; parseInt(res.data.usedMemory);<br>                _this.totalMemory &#x3D; parseInt(res.data.totalMemory);<br>            &#125;)<br>                .catch((e) &#x3D;&gt; &#123;<br>                    console.log(&#39;plugins: 内存数据获取失败&#39;);<br>                &#125;);<br>        &#125;<br>    &#125;<br>&#125;<br>&lt;&#x2F;script&gt;<br></code></pre></td></tr></table></figure>

<p>执行 <code>npm run dev</code> ，打开浏览器访问 <a target="_blank" rel="noopener" href="http://localhost:3000/">localhost:3000</a> 查看效果</p>
<img src="/2020/12/03/%E5%9F%BA%E4%BA%8E-Vue-Genesis-%E5%BE%AE%E5%89%8D%E7%AB%AF%E7%9A%84%E5%89%8D%E7%AB%AF%E6%8F%92%E4%BB%B6%E5%8C%96/vue-genesis-template2.png" class="">

<h3 id="编译"><a href="#编译" class="headerlink" title="编译"></a>编译</h3><p>修改 <code>genesis.build.ts</code> 文件编译代码</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><code class="hljs ts"><span class="hljs-keyword">import</span> path <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;path&#x27;</span>;<br><span class="hljs-keyword">import</span> fs <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;fs&#x27;</span>;<br><span class="hljs-keyword">import</span> &#123; Build &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@fmfe/genesis-compiler&#x27;</span>;<br><span class="hljs-keyword">import</span> &#123; ssr &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;./genesis&#x27;</span>;<br><br><span class="hljs-keyword">const</span> start = <span class="hljs-keyword">async</span> () =&gt; &#123;<br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * 创建一个编译实例</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-keyword">const</span> build = <span class="hljs-keyword">new</span> Build(ssr);<br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * 开始执行编译程序，构建生产环境应用包</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-keyword">await</span> build.start();<br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * 编译完成后，创建一个渲染器，输出远程组件所需的内容</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-keyword">const</span> renderer = ssr.createRenderer();<br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * CSR 渲染输出 JSON</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-keyword">const</span> result = <span class="hljs-keyword">await</span> renderer.render(&#123; <span class="hljs-attr">mode</span>: <span class="hljs-string">&#x27;csr-json&#x27;</span> &#125;);<br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * 将 JSON 保存到客户端目录</span><br><span class="hljs-comment">     */</span><br>    fs.writeFileSync(<br>        path.resolve(ssr.outputDirInClient, <span class="hljs-string">&#x27;app.json&#x27;</span>),<br>        <span class="hljs-built_in">JSON</span>.stringify(result.data, <span class="hljs-literal">null</span>, <span class="hljs-number">4</span>),<br>        <span class="hljs-string">&#x27;utf8&#x27;</span><br>    );<br>&#125;;<br>start();<br></code></pre></td></tr></table></figure>

<p>重复文件名会报重名错误，修改 <code>genesis.ts</code> 中创建 SSR 实例的属性</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs ts"><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * 创建一个 SSR 实例</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> ssr = <span class="hljs-keyword">new</span> SSR(&#123;<br>    name: <span class="hljs-string">&#x27;my-plugin&#x27;</span><br>&#125;);<br></code></pre></td></tr></table></figure>

<p>原 <code>package.json</code> 的 <code>build</code> 代码中含有 <code>rm -rf</code> ，需要 Linux 环境。此处为 Windows 环境，修改并增加 <code>cross-env</code> </p>
<img src="/2020/12/03/%E5%9F%BA%E4%BA%8E-Vue-Genesis-%E5%BE%AE%E5%89%8D%E7%AB%AF%E7%9A%84%E5%89%8D%E7%AB%AF%E6%8F%92%E4%BB%B6%E5%8C%96/vue-genesis-template3.png" class="">

<p>执行 <code>npm run build</code> ，<code>dist</code> 文件夹下生成编译后的插件的静态文件</p>
<img src="/2020/12/03/%E5%9F%BA%E4%BA%8E-Vue-Genesis-%E5%BE%AE%E5%89%8D%E7%AB%AF%E7%9A%84%E5%89%8D%E7%AB%AF%E6%8F%92%E4%BB%B6%E5%8C%96/vue-genesis-template4.png" class="">

<p>只需要将 <code>client</code> 目录的静态文件部署到服务器即可</p>
<h2 id="主项目远程组件加载"><a href="#主项目远程组件加载" class="headerlink" title="主项目远程组件加载"></a>主项目远程组件加载</h2><p>假设静态资源的基本路径是 <code>/my-plugin/</code>，那么就可以通过 <code>/my-plugin/app.json</code> 访问到这个文件</p>
<img src="/2020/12/03/%E5%9F%BA%E4%BA%8E-Vue-Genesis-%E5%BE%AE%E5%89%8D%E7%AB%AF%E7%9A%84%E5%89%8D%E7%AB%AF%E6%8F%92%E4%BB%B6%E5%8C%96/vue-genesis-template5.png" class="">

<p>在主项目上安装远程组件</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">npm install @fmfe/genesis-remote axios<br></code></pre></td></tr></table></figure>

<p>在对应的路由上，使用远程组件，加载此组件即可</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;template&gt;<br>    &lt;div class&#x3D;&quot;app&quot;&gt;<br>        &lt;RemoteView :fetch&#x3D;&quot;fetch&quot; &#x2F;&gt;<br>    &lt;&#x2F;div&gt;<br>&lt;&#x2F;template&gt;<br>&lt;script lang&#x3D;&quot;ts&quot;&gt;<br>import Vue from &#39;vue&#39;;<br>import axios from &#39;axios&#39;;<br>import &#123; RemoteView &#125; from &#39;@fmfe&#x2F;genesis-remote&#39;;<br><br>export default Vue.extend(&#123;<br>    components: &#123;<br>        RemoteView<br>    &#125;,<br>    methods: &#123;<br>        async fetch() &#123;<br>            const res &#x3D; await axios.get(&#39;&#x2F;ssr-genesis&#x2F;app.json&#39;);<br>            if (res.status &#x3D;&#x3D;&#x3D; 200) &#123;<br>                return res.data;<br>            &#125;<br>            return null;<br>        &#125;<br>    &#125;<br>&#125;);<br>&lt;&#x2F;script&gt;<br></code></pre></td></tr></table></figure>

<ul>
<li><em>若有多个插件或需求控制插件的开启关闭，则需增加插件管理机制</em></li>
</ul>
<h3 id="增加插件管理"><a href="#增加插件管理" class="headerlink" title="增加插件管理"></a>增加插件管理</h3><p>给远程组件增加插件的路径属性</p>
<img src="/2020/12/03/%E5%9F%BA%E4%BA%8E-Vue-Genesis-%E5%BE%AE%E5%89%8D%E7%AB%AF%E7%9A%84%E5%89%8D%E7%AB%AF%E6%8F%92%E4%BB%B6%E5%8C%96/vue-genesis-template6.png" class="">

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;template&gt;<br>  &lt;div class&#x3D;&quot;plugin-container&quot;&gt;<br>    &lt;RemoteView :fetch&#x3D;&quot;fetch&quot; &#x2F;&gt;<br>  &lt;&#x2F;div&gt;<br>&lt;&#x2F;template&gt;<br><br>&lt;script&gt;<br>import axios from &#39;axios&#39;;<br>import &#123; RemoteView &#125; from &#39;@fmfe&#x2F;genesis-remote&#39;;<br><br>export default &#123;<br>  name: &quot;PluginContainer&quot;,<br>  components: &#123;<br>    RemoteView<br>  &#125;,<br>  props: [&#39;pluginSrc&#39;],<br>  methods: &#123;<br>    async fetch() &#123;<br>      const plugin_addr &#x3D; this.pluginSrc;<br>      const res &#x3D; await axios.get(plugin_addr);<br>      if (res.status &#x3D;&#x3D;&#x3D; 200) &#123;<br>        return res.data;<br>      &#125;<br>      return null;<br>    &#125;<br>  &#125;<br>&#125;<br>&lt;&#x2F;script&gt;<br></code></pre></td></tr></table></figure>

<p>在主页中动态加载远程组件</p>
<img src="/2020/12/03/%E5%9F%BA%E4%BA%8E-Vue-Genesis-%E5%BE%AE%E5%89%8D%E7%AB%AF%E7%9A%84%E5%89%8D%E7%AB%AF%E6%8F%92%E4%BB%B6%E5%8C%96/vue-genesis-template7.png" class="">

<img src="/2020/12/03/%E5%9F%BA%E4%BA%8E-Vue-Genesis-%E5%BE%AE%E5%89%8D%E7%AB%AF%E7%9A%84%E5%89%8D%E7%AB%AF%E6%8F%92%E4%BB%B6%E5%8C%96/vue-genesis-template8.png" class="">

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;!-- ... --&gt;<br>		&lt;div v-for&#x3D;&quot;plugin in plugins&quot;&gt;<br>  			&lt;PluginContainer :pluginSrc&#x3D;&quot;plugin.src&quot; &#x2F;&gt;<br>		&lt;&#x2F;div&gt;<br>&lt;!-- ... --&gt;<br><br>&lt;script&gt;<br>import axios from &#39;axios&#39;;<br>import Cookies from &#39;js-cookie&#39;<br>import PluginContainer from &#39;.&#x2F;components&#x2F;PluginContainer&#39;<br><br>export default &#123;<br>  name: &#39;Layout&#39;,<br>  components: &#123;<br>    PluginContainer<br>  &#125;,<br>  data() &#123;<br>    return &#123;<br>      plugins: []<br>    &#125;<br>  &#125;,<br>  async mounted() &#123;<br>    this.getPluginList();<br>  &#125;,<br>  methods: &#123;<br>    getPluginList() &#123;<br>      const _this &#x3D; this;<br>      axios(&#123;<br>        headers:&#123;<br>          &#39;Authorization&#39;: &#39;Bearer &#39; + Cookies.get(&#39;Admin-Token&#39;)<br>        &#125;,<br>        method: &#39;get&#39;,<br>        url: &#39;http:&#x2F;&#x2F;192.168.131.140:8080&#x2F;plugins&#x2F;fronts&#39;,<br>      &#125;)<br>        .then(res &#x3D;&gt; &#123;<br>          console.log(res);<br>          if (res.status &#x3D;&#x3D;&#x3D; 200) &#123;<br>            _this.plugins &#x3D; res.data.filter(item &#x3D;&gt; item.enable &#x3D;&#x3D; true)<br>          &#125;<br>        &#125;)<br>        .catch((e) &#x3D;&gt; &#123;<br>          console.log(&#39;plugins: 插件列表获取失败&#39;);<br>        &#125;);<br>    &#125;<br>  &#125;<br>&#125;<br>&lt;&#x2F;script&gt;<br></code></pre></td></tr></table></figure>

<p>此处访问后台接口 <code>/plugins/fronts</code> 获取插件列表，根据插件列表动态加载远程组件</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs json">&#123;<br>  <span class="hljs-attr">&quot;data&quot;</span>: [<br>    &#123;<br>      <span class="hljs-attr">&quot;enable&quot;</span>: <span class="hljs-literal">true</span>,<br>      <span class="hljs-attr">&quot;name&quot;</span>: <span class="hljs-string">&quot;myPlugin&quot;</span>,<br>      <span class="hljs-attr">&quot;src&quot;</span>: <span class="hljs-string">&quot;/my-plugin/app.json&quot;</span><br>    &#125;<br>  ]<br>&#125;<br></code></pre></td></tr></table></figure>

<h3 id="效果预览"><a href="#效果预览" class="headerlink" title="效果预览"></a>效果预览</h3><img src="/2020/12/03/%E5%9F%BA%E4%BA%8E-Vue-Genesis-%E5%BE%AE%E5%89%8D%E7%AB%AF%E7%9A%84%E5%89%8D%E7%AB%AF%E6%8F%92%E4%BB%B6%E5%8C%96/vue-genesis-template9.png" class="">

<h2 id="genesis-app-多路由"><a href="#genesis-app-多路由" class="headerlink" title="genesis-app 多路由"></a>genesis-app 多路由</h2><p><a target="_blank" rel="noopener" href="https://router.vuejs.org/zh/">vue-router</a> 不支持一个页面上创建多个历史模式的路由实例，否则调用 <code>router.push()</code> 方法时，将会创建多个历史记录，为了解决这个问题，请使用 <a target="_blank" rel="noopener" href="https://fmfe.github.io/genesis-docs/app/">genesis-app</a> 的路由</p>
<p>它提供了快速创建APP的方法，以及包装了 <code>vue-router</code>，解决了在历史模式下，多个 <code>Router</code> 实例冲突的问题</p>
<h3 id="安装-1"><a href="#安装-1" class="headerlink" title="安装"></a>安装</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">npm install vue-router @fmfe/genesis-app<br></code></pre></td></tr></table></figure>

<h3 id="使用"><a href="#使用" class="headerlink" title="使用"></a>使用</h3><p>在 <code>app.vue</code> 中添加 <code>&lt;router-link&gt;</code> 和 <code>&lt;router-view&gt;</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;template&gt;<br>    &lt;div class&#x3D;&quot;app&quot;&gt;<br>        &lt;h2&gt;Hello World！&lt;&#x2F;h2&gt;<br>        &lt;p v-if&#x3D;&quot;show&quot; @click&#x3D;&quot;clsoe&quot; class&#x3D;&quot;text&quot;&gt;<br>            &#123;&#123; installed ? &#39;在客户端应该安装成功，点击我关闭!&#39; : &#39;未安装&#39; &#125;&#125;<br>        &lt;&#x2F;p&gt;<br>        &lt;ul&gt;<br>            &lt;li&gt;<br>                &lt;router-link to&#x3D;&quot;&#x2F;about&#x2F;us&quot;&gt;关于我们&lt;&#x2F;router-link&gt;<br>                &lt;router-link to&#x3D;&quot;&#x2F;about&#x2F;help&quot;&gt;帮助&lt;&#x2F;router-link&gt;<br>            &lt;&#x2F;li&gt;<br>        &lt;&#x2F;ul&gt;<br>        &lt;router-view&gt;&lt;&#x2F;router-view&gt;<br>    &lt;&#x2F;div&gt;<br>&lt;&#x2F;template&gt;<br>&lt;!-- ... --&gt;<br></code></pre></td></tr></table></figure>

<p>在 <code>src</code> 目录下新建 <code>views</code> 文件夹，在该文件夹内创建 <code>about-us.vue</code> 和 <code>about-help.vue</code> 两个文件</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;template&gt;<br>    &lt;div&gt;关于我们&lt;&#x2F;div&gt;<br>&lt;&#x2F;template&gt;<br>&lt;script lang&#x3D;&quot;ts&quot;&gt;<br>import Vue from &#39;vue&#39;;<br>export default Vue.extend(&#123;<br>    name: &#39;about-us&#39;<br>&#125;);<br>&lt;&#x2F;script&gt;<br></code></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;template&gt;<br>    &lt;div&gt;帮助中心&lt;&#x2F;div&gt;<br>&lt;&#x2F;template&gt;<br>&lt;script lang&#x3D;&quot;ts&quot;&gt;<br>import Vue from &#39;vue&#39;;<br>export default Vue.extend(&#123;<br>    name: &#39;about-help&#39;<br>&#125;);<br>&lt;&#x2F;script&gt;<br></code></pre></td></tr></table></figure>

<p>在 <code>src</code> 目录下创建 <code>router.ts</code> 文件</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">import</span> &#123; RouterMode &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;vue-router&#x27;</span>;<br><span class="hljs-keyword">import</span> &#123; Router &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@fmfe/genesis-app&#x27;</span>;<br><br><span class="hljs-keyword">interface</span> State &#123;<br>    routerMode?: RouterMode;<br>&#125;<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> createRouter = <span class="hljs-function">(<span class="hljs-params">state: State</span>) =&gt;</span> &#123;<br>    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> Router(&#123;<br>        mode: state?.routerMode || <span class="hljs-string">&#x27;history&#x27;</span>,<br>        routes: [<br>            &#123;<br>                path: <span class="hljs-string">&#x27;/about/us&#x27;</span>,<br>                component: <span class="hljs-function">() =&gt;</span> <span class="hljs-keyword">import</span>(<span class="hljs-string">&#x27;./views/about-us.vue&#x27;</span>).then(<span class="hljs-function">(<span class="hljs-params">m</span>) =&gt;</span> m.default)<br>            &#125;,<br>            &#123;<br>                path: <span class="hljs-string">&#x27;/about/help&#x27;</span>,<br>                component: <span class="hljs-function">() =&gt;</span> <span class="hljs-keyword">import</span>(<span class="hljs-string">&#x27;./views/about-help.vue&#x27;</span>).then(<span class="hljs-function">(<span class="hljs-params">m</span>) =&gt;</span> m.default)<br>            &#125;<br>        ]<br>    &#125;);<br>&#125;;<br></code></pre></td></tr></table></figure>

<p>客户端使用</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-comment">// entry-client.ts</span><br><span class="hljs-keyword">import</span> &#123; ClientOptions &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@fmfe/genesis-core&#x27;</span>;<br><span class="hljs-keyword">import</span> &#123; createClientApp &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@fmfe/genesis-app&#x27;</span>;<br><span class="hljs-keyword">import</span> &#123; createRouter &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;./router&#x27;</span>;<br><span class="hljs-keyword">import</span> Vue <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;vue&#x27;</span>;<br><span class="hljs-keyword">import</span> App <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;./app.vue&#x27;</span>;<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">async</span> (clientOptions: ClientOptions): <span class="hljs-built_in">Promise</span>&lt;Vue&gt; =&gt; &#123;<br>    <span class="hljs-keyword">return</span> createClientApp(&#123;<br>        App,<br>        clientOptions,<br>        vueOptions: &#123;<br>            router: createRouter(clientOptions.state)<br>        &#125;<br>    &#125;);<br>&#125;;<br></code></pre></td></tr></table></figure>

<p>服务端</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-comment">// entry-server.ts</span><br><span class="hljs-keyword">import</span> &#123; ClientOptions &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@fmfe/genesis-core&#x27;</span>;<br><span class="hljs-keyword">import</span> &#123; createClientApp &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@fmfe/genesis-app&#x27;</span>;<br><span class="hljs-keyword">import</span> &#123; createRouter &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;./router&#x27;</span>;<br><span class="hljs-keyword">import</span> Vue <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;vue&#x27;</span>;<br><span class="hljs-keyword">import</span> App <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;./app.vue&#x27;</span>;<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">async</span> (clientOptions: ClientOptions): <span class="hljs-built_in">Promise</span>&lt;Vue&gt; =&gt; &#123;<br>    <span class="hljs-keyword">return</span> createClientApp(&#123;<br>        App,<br>        clientOptions,<br>        vueOptions: &#123;<br>            router: createRouter(clientOptions.state)<br>        &#125;<br>    &#125;);<br>&#125;;<br></code></pre></td></tr></table></figure>

<h3 id="主项目引用"><a href="#主项目引用" class="headerlink" title="主项目引用"></a>主项目引用</h3><p>主项目的 router 设置为 <code>history</code> 模式</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> constantRoutes = [<br>    <span class="hljs-comment">// ...</span><br>    &#123;<br>      path: <span class="hljs-string">&#x27;/about&#x27;</span>,<br>      component: Layout,<br>      children: [<br>        &#123;<br>          path: <span class="hljs-string">&#x27;us&#x27;</span>,<br>          name: <span class="hljs-string">&#x27;AboutUs&#x27;</span>,<br>          component: <span class="hljs-function">() =&gt;</span> <span class="hljs-keyword">import</span>(<span class="hljs-string">&#x27;@/views/plugin/index&#x27;</span>),<br>          meta: &#123; <span class="hljs-attr">title</span>: <span class="hljs-string">&#x27;Plugin&#x27;</span>, <span class="hljs-attr">icon</span>: <span class="hljs-string">&#x27;eye-open&#x27;</span> &#125;<br>        &#125;,<br>        &#123;<br>          path: <span class="hljs-string">&#x27;*&#x27;</span>,<br>          component: <span class="hljs-function">() =&gt;</span> <span class="hljs-keyword">import</span>(<span class="hljs-string">&#x27;@/views/plugin/index&#x27;</span>),<br>          name: <span class="hljs-string">&#x27;About&#x27;</span>,<br>          meta: &#123; <span class="hljs-attr">title</span>: <span class="hljs-string">&#x27;Plugin&#x27;</span>, <span class="hljs-attr">icon</span>: <span class="hljs-string">&#x27;eye-open&#x27;</span>, <span class="hljs-attr">activeMenu</span>: <span class="hljs-string">&#x27;/about&#x27;</span> &#125;,<br>          hidden: <span class="hljs-literal">true</span><br>        &#125;<br>      ]<br>    &#125;,<br>    <span class="hljs-comment">// ...</span><br>]<br></code></pre></td></tr></table></figure>

<p><code>views/plugin/index.vue</code> 界面</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;template&gt;<br>  &lt;div class&#x3D;&quot;plugin-container&quot;&gt;<br>    &lt;RemoteView :fetch&#x3D;&quot;fetch&quot; &#x2F;&gt;<br>  &lt;&#x2F;div&gt;<br>&lt;&#x2F;template&gt;<br><br>&lt;script&gt;<br>import axios from &#39;axios&#39;<br>import &#123; RemoteView &#125; from &#39;@fmfe&#x2F;genesis-remote&#39;<br><br>export default &#123;<br>  name: &#39;PluginContainer&#39;,<br>  components: &#123;<br>    RemoteView<br>  &#125;,<br>  methods: &#123;<br>    async fetch() &#123;<br>      const src &#x3D; &#39;&#x2F;folder&#x2F;my-plugin&#x2F;app.json&#39;<br>      const res &#x3D; await axios.get(src) &#x2F;&#x2F; 获取ssr-genesis静态文件<br>      if (res.status &#x3D;&#x3D;&#x3D; 200) &#123;<br>        res.data.url &#x3D; this.$route.fullPath;<br>        return res.data<br>      &#125;<br>      return null<br>    &#125;<br>  &#125;<br>&#125;<br>&lt;&#x2F;script&gt;<br></code></pre></td></tr></table></figure>

<p>只需设置 <code>app.json</code> 里的 <code>url</code> 的值即可实现 <code>genesis-app</code> 的链接跳转</p>
<img src="/2020/12/03/%E5%9F%BA%E4%BA%8E-Vue-Genesis-%E5%BE%AE%E5%89%8D%E7%AB%AF%E7%9A%84%E5%89%8D%E7%AB%AF%E6%8F%92%E4%BB%B6%E5%8C%96/vue-genesis-template12.png" class="">

<img src="/2020/12/03/%E5%9F%BA%E4%BA%8E-Vue-Genesis-%E5%BE%AE%E5%89%8D%E7%AB%AF%E7%9A%84%E5%89%8D%E7%AB%AF%E6%8F%92%E4%BB%B6%E5%8C%96/vue-genesis-template13.png" class="">

<p>效果预览</p>
<img src="/2020/12/03/%E5%9F%BA%E4%BA%8E-Vue-Genesis-%E5%BE%AE%E5%89%8D%E7%AB%AF%E7%9A%84%E5%89%8D%E7%AB%AF%E6%8F%92%E4%BB%B6%E5%8C%96/vue-genesis-template14.png" class="">
<div id="paginator"></div></div><div id="post-footer"><hr><a href="/2020/12/03/%E5%9F%BA%E4%BA%8E-Vue-Element-Admin-%E7%9A%84%E5%8A%A8%E6%80%81%E8%B7%AF%E7%94%B1/">← Prev 基于 Vue Element Admin 的动态路由</a><span style="color: #fe2"> | </span><a href="/2020/10/23/node-heap-out-of-memory/">Node.js 编译时内存溢出 Next →</a><hr></div><div id="bottom-btn"><a id="to-index" href="#post-index" title="index">≡</a><a id="to-top" href="#post-title" title="to top">∧</a></div><details id="reward"><summary>打赏</summary><div id="alipay"><span>支付宝 | Alipay</span><br><img src="/img/Alipay.png"></div><div id="wechat"><span>微信 | WeChat</span><br><img src="/img/WeChat.png"></div></details><div id="Valine"></div><script>new Valine({
 el: '#Valine'
 , appId: ''
 , appKey: ''
 , placeholder: '此条评论委托企鹅物流发送'
})</script></div></article><aside><div id="about"><a href="/" id="logo"><img src="https://ak.hypergryph.com/assets/index/images/ak/pc/faction/1.png" alt="Logo"></a><h1 id="Dr"><a target="_blank" rel="noopener" href="https://github.com/shanliangLS"> Dr.Shining</a></h1><section id="total"><a id="total-archives" href="/archives"><span class="total-title">Archives Total:</span><span class="total-number">18</span></a><div id="total-tags"><span class="total-title">Tags:</span><span class="total-number">17</span></div><div id="total-categories"><span class="total-title">Categories:</span><span class="total-number">6</span></div></section></div><div id="aside-block"><h1>INDEX</h1><div id="post-index"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#Vue-Genesis"><span class="toc-number">1.</span> <span class="toc-text">Vue Genesis</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%89%E8%A3%85"><span class="toc-number">2.</span> <span class="toc-text">安装</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#TS-%E8%BF%90%E8%A1%8C%E6%97%B6"><span class="toc-number">2.1.</span> <span class="toc-text">TS 运行时</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#HTTP-%E6%9C%8D%E5%8A%A1"><span class="toc-number">2.2.</span> <span class="toc-text">HTTP 服务</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#vue-genesis-template"><span class="toc-number">3.</span> <span class="toc-text">vue-genesis-template</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BC%96%E5%86%99%E6%8F%92%E4%BB%B6"><span class="toc-number">3.1.</span> <span class="toc-text">编写插件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BC%96%E8%AF%91"><span class="toc-number">3.2.</span> <span class="toc-text">编译</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%BB%E9%A1%B9%E7%9B%AE%E8%BF%9C%E7%A8%8B%E7%BB%84%E4%BB%B6%E5%8A%A0%E8%BD%BD"><span class="toc-number">4.</span> <span class="toc-text">主项目远程组件加载</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%A2%9E%E5%8A%A0%E6%8F%92%E4%BB%B6%E7%AE%A1%E7%90%86"><span class="toc-number">4.1.</span> <span class="toc-text">增加插件管理</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%95%88%E6%9E%9C%E9%A2%84%E8%A7%88"><span class="toc-number">4.2.</span> <span class="toc-text">效果预览</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#genesis-app-%E5%A4%9A%E8%B7%AF%E7%94%B1"><span class="toc-number">5.</span> <span class="toc-text">genesis-app 多路由</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%89%E8%A3%85-1"><span class="toc-number">5.1.</span> <span class="toc-text">安装</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8"><span class="toc-number">5.2.</span> <span class="toc-text">使用</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%BB%E9%A1%B9%E7%9B%AE%E5%BC%95%E7%94%A8"><span class="toc-number">5.3.</span> <span class="toc-text">主项目引用</span></a></li></ol></li></ol></div></div><footer><nobr><span class="text-title">©</span><span class="text-content">github.com/shanliangLS</span></nobr><wbr><wbr><nobr>published with&nbsp;<a target="_blank" rel="noopener" href="http://hexo.io">Hexo&nbsp;</a></nobr><wbr><nobr>Theme&nbsp;<a target="_blank" rel="noopener" href="https://github.com/Yue-plus/hexo-theme-arknights">Arknight&nbsp;</a></nobr></footer></aside></main><canvas id="canvas-dust"></canvas><script src="/js/arknights.js"></script><script src="https://cdn.bootcdn.net/ajax/libs/highlight.js/10.1.2/highlight.min.js"></script></body></html>